{% extends "partials/adminBase.html" %}
{% load static %}

{% block title %}Dashboard{% endblock title %}


{% block extra_css %}
    <!-- plugin css -->
    <link href="{% static 'libs/admin-resources/jquery.vectormap/jquery-jvectormap-1.2.2.css' %}" rel="stylesheet"
          type="text/css"/>
{% endblock extra_css %}

{% block content %}
    {% include "partials/adminContent.html" with title='Admin Dashboard' pageview='Admin Dashboard' %}
{% endblock content %}

{% block extra_js %}
    <!-- apexcharts -->
    <script src="{% static 'libs/apexcharts/dist/apexcharts.min.js' %}"></script>

    <!-- Plugins js-->
    <script src="{% static 'libs/admin-resources/jquery.vectormap/jquery-jvectormap-1.2.2.min.js' %}"></script>
    <script src="{% static 'libs/admin-resources/jquery.vectormap/maps/jquery-jvectormap-world-mill-en.js' %}"></script>
    <script src="{% static 'js/pages/allchart.js' %}"></script>
    <!-- dashboard init -->
    <script src="{% static 'js/pages/dashboard.init.js' %}"></script>
    <!-- update market-overview chart with real appointment data -->
    <script>
    (function() {
        var labels = {{ market_chart_labels|safe }};
        var data = {{ market_chart_data|safe }};
        setTimeout(function() {
            try {
                if (typeof ApexCharts !== 'undefined') {
                    ApexCharts.exec('market-overview', 'updateOptions', {
                        xaxis: { categories: labels },
                        series: [{ name: 'Appointments', data: data }],
                        chart: { stacked: false },
                        yaxis: {
                            labels: {
                                formatter: function(val) { return val; }
                            }
                        }
                    }, false, true);
                }
            } catch (e) {}
        }, 100);
    })();
    </script>

{% endblock extra_js %}